<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress Tracker - Microsoft Entra ID Learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
                }
            }
        }
    </script>
</head>
<body class="font-sans antialiased bg-slate-50">
    <!-- Navigation -->
    <nav class="fixed w-full bg-white/80 backdrop-blur-md z-50 border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="../index.html" class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-sky-500 to-cyan-500 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                    </div>
                    <span class="text-xl font-bold text-slate-900">Entra ID Academy</span>
                </a>
                <div class="flex items-center space-x-6">
                    <a href="../start.html" class="text-slate-600 hover:text-slate-900 transition hidden md:block">‚Üê Back to Tracks</a>
                    <button onclick="resetProgress()" class="text-slate-600 hover:text-slate-900 transition text-sm">Reset</button>
                    <button onclick="exportProgress()" class="px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition text-sm">
                        Export Progress
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="pt-24 pb-12 px-4 bg-gradient-to-br from-slate-900 to-slate-800">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">üìä Learning Progress Tracker</h1>
                <p class="text-xl text-slate-300">Track your journey through the 5-day program</p>
            </div>

            <!-- Progress Bar -->
            <div class="bg-slate-800 rounded-2xl p-6 mb-6">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-slate-300 font-medium">Overall Progress</span>
                    <span class="text-white font-bold text-lg" id="progressText">0%</span>
                </div>
                <div class="bg-slate-700 rounded-full h-4 overflow-hidden">
                    <div id="progressBar" class="bg-gradient-to-r from-sky-500 to-cyan-500 h-full transition-all duration-500 rounded-full" style="width: 0%"></div>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-slate-800 rounded-xl p-4 text-center">
                    <div class="text-3xl font-bold text-sky-400" id="completedCount">0</div>
                    <div class="text-slate-400 text-sm">Completed</div>
                </div>
                <div class="bg-slate-800 rounded-xl p-4 text-center">
                    <div class="text-3xl font-bold text-slate-300" id="totalCount">26</div>
                    <div class="text-slate-400 text-sm">Total Modules</div>
                </div>
                <div class="bg-slate-800 rounded-xl p-4 text-center">
                    <div class="text-3xl font-bold text-cyan-400" id="currentDay">0</div>
                    <div class="text-slate-400 text-sm">Current Day</div>
                </div>
                <div class="bg-slate-800 rounded-xl p-4 text-center">
                    <div class="text-3xl font-bold text-emerald-400">40-56h</div>
                    <div class="text-slate-400 text-sm">Total Time</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Timeline -->
    <section class="py-12 px-4">
        <div class="max-w-7xl mx-auto" id="timeline">
            <!-- Timeline will be populated by JavaScript -->
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-900 py-8 px-4 mt-12">
        <div class="max-w-7xl mx-auto text-center">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="../index.html" class="text-slate-400 hover:text-white transition text-sm">Home</a>
                <a href="../start.html" class="text-slate-400 hover:text-white transition text-sm">Learning Tracks</a>
                <a href="../architecture.html" class="text-slate-400 hover:text-white transition text-sm">Architecture</a>
            </div>
            <p class="text-slate-400 text-sm">&copy; 2025 Entra ID Academy ‚Ä¢ MIT License</p>
        </div>
    </footer>

    <script>
        const scheduleData = [
            {
                day: 0,
                title: "Pre-Work Setup",
                duration: "1-2 hours",
                color: "from-pink-500 to-rose-500",
                borderColor: "border-pink-500",
                bgColor: "bg-pink-50",
                modules: [
                    { title: "Azure Free Account Setup", time: "30 min", description: "Create free Azure account with $200 credit for 30 days" },
                    { title: "M365 Developer Program", time: "30 min", description: "Set up instant sandbox with E5 licenses (25 users)" },
                    { title: "Bookmark Essential Portals", time: "15 min", description: "Entra Admin, Azure Portal, M365 Admin, Graph Explorer, My Apps" },
                    { title: "Install Tools", time: "15 min", description: "Microsoft Authenticator app, PowerShell 7+, VS Code (optional)" }
                ]
            },
            {
                day: 1,
                title: "Foundations & Identity Fundamentals",
                duration: "6-8 hours",
                color: "from-blue-500 to-cyan-500",
                borderColor: "border-blue-500",
                bgColor: "bg-blue-50",
                modules: [
                    { title: "What is Microsoft Entra ID?", time: "60 min", description: "Entra family, Zero Trust principles, licensing tiers" },
                    { title: "Core Identity Concepts", time: "90 min", description: "Users, groups, devices, apps, directory structure, RBAC intro" },
                    { title: "User & Group Management Lab", time: "90 min", description: "Create users, security groups, dynamic groups, bulk import, licenses" },
                    { title: "Administrative Roles & RBAC", time: "90 min", description: "Built-in roles, custom roles, administrative units, delegation" }
                ]
            },
            {
                day: 2,
                title: "Authentication & Security",
                duration: "6-8 hours",
                color: "from-emerald-500 to-teal-500",
                borderColor: "border-emerald-500",
                bgColor: "bg-emerald-50",
                modules: [
                    { title: "Authentication Methods", time: "90 min", description: "MFA methods, passwordless (FIDO2, Hello), SSPR configuration" },
                    { title: "Multi-Factor Authentication Lab", time: "90 min", description: "Enable MFA, configure Authenticator, test SSPR, banned passwords" },
                    { title: "Conditional Access Fundamentals", time: "90 min", description: "Policy structure, conditions, controls, What-If tool, report-only mode" },
                    { title: "Build Conditional Access Policies", time: "90 min", description: "Create 5+ policies: MFA for admins/all, block legacy auth, device compliance" },
                    { title: "Identity Protection", time: "60 min", description: "Risk detection types, user/sign-in risk policies, investigation workflows" }
                ]
            },
            {
                day: 3,
                title: "Enterprise Integration & Hybrid Identity",
                duration: "6-8 hours",
                color: "from-violet-500 to-purple-500",
                borderColor: "border-violet-500",
                bgColor: "bg-violet-50",
                modules: [
                    { title: "Enterprise Applications Overview", time: "90 min", description: "SSO protocols (SAML, OIDC), 2600+ app gallery, Application Proxy" },
                    { title: "SSO Configuration Lab", time: "90 min", description: "Configure Salesforce, Slack, AWS with SAML SSO, test My Apps portal" },
                    { title: "Hybrid Identity Concepts", time: "90 min", description: "Entra Connect options, PHS vs PTA vs Federation, Seamless SSO" },
                    { title: "Microsoft 365 Integration", time: "60 min", description: "M365 access policies, external sharing, Teams/SharePoint, Intune" },
                    { title: "Microsoft Graph & Automation", time: "90 min", description: "Graph Explorer, PowerShell SDK, automate user/group operations" }
                ]
            },
            {
                day: 4,
                title: "Governance & Advanced Features",
                duration: "6-8 hours",
                color: "from-orange-500 to-amber-500",
                borderColor: "border-orange-500",
                bgColor: "bg-orange-50",
                modules: [
                    { title: "Identity Governance Overview", time: "60 min", description: "Joiner-Mover-Leaver lifecycle, entitlements, compliance requirements" },
                    { title: "Entitlement Management Lab", time: "90 min", description: "Access packages, catalogs, approval workflows, access reviews, My Access" },
                    { title: "Privileged Identity Management", time: "90 min", description: "Eligible vs active assignments, JIT access, activation requirements" },
                    { title: "PIM Hands-On Lab", time: "90 min", description: "Configure PIM, eligible assignments, test activation, break-glass accounts" },
                    { title: "Advanced Entra Suite Features", time: "90 min", description: "Domain Services, Verified ID, Private/Internet Access, CIEM overview" }
                ]
            },
            {
                day: 5,
                title: "Production Readiness & Capstone",
                duration: "6-8 hours",
                color: "from-indigo-500 to-blue-500",
                borderColor: "border-indigo-500",
                bgColor: "bg-indigo-50",
                modules: [
                    { title: "Monitoring & Reporting", time: "90 min", description: "Sign-in/audit logs, Log Analytics, KQL queries, workbooks, alerts" },
                    { title: "Best Practices & Architecture", time: "90 min", description: "Zero Trust maturity, break-glass accounts, deployment planning, baselines" },
                    { title: "Troubleshooting", time: "60 min", description: "Common issues, sign-in errors, CA conflicts, sync errors, support tickets" },
                    { title: "Capstone Project", time: "120 min", description: "Design complete identity solution for Contoso Corporation (500 users)" },
                    { title: "Latest Features & Continued Learning", time: "60 min", description: "2025 updates, roadmap, community, SC-300 certification path" }
                ]
            }
        ];

        let completedModules = new Set();

        function loadProgress() {
            const saved = localStorage.getItem('entraIdProgress');
            if (saved) {
                completedModules = new Set(JSON.parse(saved));
            }
        }

        function saveProgress() {
            localStorage.setItem('entraIdProgress', JSON.stringify([...completedModules]));
            updateStats();
        }

        function renderTimeline() {
            const timeline = document.getElementById('timeline');
            timeline.innerHTML = '';

            scheduleData.forEach((day, dayIndex) => {
                const daySection = document.createElement('div');
                daySection.className = 'mb-12';

                const completedInDay = day.modules.filter((_, modIndex) =>
                    completedModules.has(`${dayIndex}-${modIndex}`)
                ).length;
                const progressPercent = Math.round((completedInDay / day.modules.length) * 100);

                daySection.innerHTML = `
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border-2 ${day.borderColor}">
                        <!-- Day Header -->
                        <div class="bg-gradient-to-r ${day.color} p-6 cursor-pointer" onclick="toggleDay(${dayIndex})">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-16 h-16 bg-white/20 backdrop-blur rounded-xl flex items-center justify-center text-2xl font-bold text-white">
                                        ${day.day === 0 ? 'üöÄ' : day.day}
                                    </div>
                                    <div>
                                        <h2 class="text-2xl font-bold text-white mb-1">${day.title}</h2>
                                        <p class="text-white/80 text-sm">${day.duration} ‚Ä¢ ${day.modules.length} modules</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-3xl font-bold text-white">${progressPercent}%</div>
                                    <div class="text-white/80 text-sm">${completedInDay}/${day.modules.length} done</div>
                                </div>
                            </div>
                            <div class="mt-4 bg-white/20 rounded-full h-2 overflow-hidden">
                                <div class="bg-white h-full transition-all duration-500" style="width: ${progressPercent}%"></div>
                            </div>
                        </div>

                        <!-- Modules -->
                        <div class="p-6 space-y-3" id="modules-${dayIndex}">
                            ${day.modules.map((module, moduleIndex) => {
                                const moduleId = `${dayIndex}-${moduleIndex}`;
                                const isCompleted = completedModules.has(moduleId);
                                return `
                                    <div class="group relative bg-${day.bgColor} border-2 ${isCompleted ? day.borderColor : 'border-slate-200'} rounded-xl p-4 hover:shadow-md transition-all cursor-pointer ${isCompleted ? 'opacity-75' : ''}"
                                         onclick="toggleModule('${moduleId}', ${dayIndex})">
                                        <div class="flex items-start justify-between">
                                            <div class="flex-1 pr-4">
                                                <div class="flex items-center space-x-3 mb-2">
                                                    <div class="flex-shrink-0">
                                                        <button class="w-6 h-6 rounded-md border-2 ${isCompleted ? day.borderColor + ' bg-gradient-to-br ' + day.color : 'border-slate-300 bg-white'} flex items-center justify-center transition"
                                                                onclick="event.stopPropagation(); toggleModule('${moduleId}', ${dayIndex})">
                                                            ${isCompleted ? '<svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>' : ''}
                                                        </button>
                                                    </div>
                                                    <div class="flex-1">
                                                        <h3 class="font-semibold text-slate-900 ${isCompleted ? 'line-through' : ''}">${module.title}</h3>
                                                        <p class="text-sm text-slate-600">‚è±Ô∏è ${module.time}</p>
                                                    </div>
                                                </div>
                                                <p class="text-sm text-slate-600 ml-9 hidden group-hover:block">${module.description}</p>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
                timeline.appendChild(daySection);
            });

            updateStats();
        }

        function toggleDay(dayIndex) {
            const modules = document.getElementById(`modules-${dayIndex}`);
            modules.classList.toggle('hidden');
        }

        function toggleModule(moduleId, dayIndex) {
            if (completedModules.has(moduleId)) {
                completedModules.delete(moduleId);
            } else {
                completedModules.add(moduleId);
            }
            saveProgress();
            renderTimeline();
        }

        function updateStats() {
            const totalModules = scheduleData.reduce((sum, day) => sum + day.modules.length, 0);
            const completed = completedModules.size;
            const percentage = Math.round((completed / totalModules) * 100);

            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '%';
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('totalCount').textContent = totalModules;

            // Find current day (first day with incomplete modules)
            let currentDay = 0;
            for (let i = 0; i < scheduleData.length; i++) {
                const dayCompleted = scheduleData[i].modules.every((_, modIndex) =>
                    completedModules.has(`${i}-${modIndex}`)
                );
                if (!dayCompleted) {
                    currentDay = scheduleData[i].day;
                    break;
                }
            }
            document.getElementById('currentDay').textContent = currentDay === 0 ? 'üöÄ' : currentDay;
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                completedModules.clear();
                localStorage.removeItem('entraIdProgress');
                renderTimeline();
            }
        }

        function exportProgress() {
            const totalModules = scheduleData.reduce((sum, day) => sum + day.modules.length, 0);
            const data = {
                timestamp: new Date().toISOString(),
                version: "0.1.0",
                completed: [...completedModules],
                completedCount: completedModules.size,
                totalCount: totalModules,
                percentage: Math.round((completedModules.size / totalModules) * 100),
                schedule: scheduleData.map((day, dayIdx) => ({
                    day: day.day,
                    title: day.title,
                    completed: day.modules.filter((_, modIdx) => completedModules.has(`${dayIdx}-${modIdx}`)).map(m => m.title)
                }))
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `entra-id-progress-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);

            // Show toast notification
            showToast('Progress exported successfully!');
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 right-4 bg-emerald-500 text-white px-6 py-3 rounded-xl shadow-lg z-50 animate-bounce';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // Initialize
        loadProgress();
        renderTimeline();

        // Add celebratory confetti when completing all modules
        function checkCompletion() {
            const totalModules = scheduleData.reduce((sum, day) => sum + day.modules.length, 0);
            if (completedModules.size === totalModules) {
                showToast('üéâ Congratulations! You completed the entire program!');
            }
        }

        // Check completion on every update
        const originalSave = saveProgress;
        saveProgress = function() {
            originalSave();
            checkCompletion();
        };
    </script>
</body>
</html>
